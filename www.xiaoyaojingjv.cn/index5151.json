{"id":147,"date":"2024-12-20T18:25:17","date_gmt":"2024-12-20T10:25:17","guid":{"rendered":"http:\/\/www.xiaoyaojingjv.cn\/?p=147"},"modified":"2024-12-21T11:22:26","modified_gmt":"2024-12-21T03:22:26","slug":"sql","status":"publish","type":"post","link":"http:\/\/www.xiaoyaojingjv.cn\/?p=147","title":{"rendered":"SQL"},"content":{"rendered":"\n<h2 class=\"wp-block-heading\">\u7528\u6237\u6743\u9650\u53ca\u89d2\u8272<\/h2>\n\n\n\n<p>\u521b\u5efa\u7528\u6237<\/p>\n\n\n\n<p><code>with auth_plugin<\/code>\u662f\u6307\u5b9a\u7528\u6237\u53e3\u4ee4\u52a0\u5bc6\u65b9\u5f0f\uff0c\u4e0d\u5199\u5c31\u662f\u9ed8\u8ba4\u3002<code>role<\/code>\u662f\u6307\u5b9a\u7528\u6237\u7684\u7f3a\u7701\u89d2\u8272\uff0c\uff08\u7f3a\u7701\u89d2\u8272\u672c\u8d28\u4e0a\u662f\u4e00\u7ec4\u6743\u9650\u96c6\u5408\uff09\u5728 MySQL \u4e2d\uff0c\u7f3a\u7701\u89d2\u8272\uff08Default Role\uff09\u662f\u6307\u4e3a\u7528\u6237\u9884\u5148\u5206\u914d\u7684\u89d2\u8272\uff0c\u5f53\u8be5\u7528\u6237\u5728\u767b\u5f55\u65f6\u6ca1\u6709\u660e\u786e\u6307\u5b9a\u89d2\u8272\u65f6\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u4f7f\u7528\u8fd9\u4e2a\u7f3a\u7701\u89d2\u8272\u3002\u89d2\u8272\u662f MySQL \u4e2d\u7684\u4e00\u79cd\u6743\u9650\u7ba1\u7406\u673a\u5236\uff0c\u89d2\u8272\u672c\u8d28\u4e0a\u662f\u4e00\u7ec4\u6743\u9650\u7684\u96c6\u5408\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u89d2\u8272\u7ee7\u627f\u8fd9\u4e9b\u6743\u9650\u3002\u901a\u8fc7\u6307\u5b9a\u7f3a\u7701\u89d2\u8272\uff0c\u53ef\u4ee5\u7b80\u5316\u7528\u6237\u6743\u9650\u7684\u7ba1\u7406\u3002<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>create user 'usre_name'@'lochalhost' identified with auth_plugin by 'password' DEFAULT ROLE role,.....;<\/code><\/pre>\n\n\n\n<p>\u4fee\u6539\u7528\u6237<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u4fee\u6539\u7528\u6237\u53e3\u4ee4\u5bc6\u7801\nalter user user_name identified with auth_plugin by 'password' DEFAULT ROLE role,......;\n\n--\u4fee\u6539\u7528\u6237\u7f3a\u7701\u89d2\u8272\nalter user user_name DEFAULT ROLE role;\n--\u8bbe\u7f6e\u7528\u6237\u7f3a\u7701\u89d2\u8272,\u6548\u679c\u4e0e\u4e0a\u4e00\u4e2a\u76f8\u540c\nset DEFAULT ROLE role to user_name;\n\n--\u542f\u7528\u6240\u6709\u89d2\u8272\nset role all;\n--\u542f\u7528\u6307\u5b9a\u89d2\u8272\nset ROLE role;\n\n--\u4fee\u6539\u6307\u5b9a\u7528\u6237\u53e3\u4ee4\u5bc6\u7801\nset password for user_name = 'password';\n--\u4fee\u6539\u5f53\u524d\u7528\u6237\u53e3\u4ee4\u5bc6\u7801\nset password = 'password';\n\n--\u5220\u9664\u7528\u6237\ndrop user user_name;<\/code><\/pre>\n\n\n\n<p>\u6743\u9650\u7ba1\u7406<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u6388\u4e88\u6743\u9650\ngrant priv_type on &#91;object_type] priv_level to user_or_role;\n\/*\npriv_type:\u5177\u4f53\u7684\u6743\u9650\u7c7b\u578b\nobject_type:\u6743\u9650\u6240\u5c5e\u5bf9\u8c61\u7c7b\u578b\n    \ttable\uff1a\u8868\uff0c\u9ed8\u8ba4\u7c7b\u578b\n    \tfunction\uff1a\u5b58\u50a8\u51fd\u6570\n\t   \tprocedure\uff1a\u5b58\u50a8\u8fc7\u7a0b\npriv_level:\u6307\u5b9a\u6743\u9650\u8303\u56f4\n\t\t* \u6570\u636e\u5e93\u6743\u9650\uff0c\u5f53\u524d\u6570\u636e\u5e93\u6240\u6709\u5bf9\u8c61\n\t\t*.* \u5168\u5c40\u5bf9\u8c61\uff0c\u6240\u6709\u6570\u636e\u5e93\u7684\u6240\u6709\u5bf9\u8c61\n\t\tdb_name.* \u6570\u636e\u5e93\u6743\u9650\uff0c\u6307\u5b9a\u6570\u636e\u5e93\u7684\u6240\u6709\u5bf9\u8c61\n\t\tdb_name.tbl_name \u5bf9\u8c61\u6743\u9650\uff0c\u6307\u5b9a\u6570\u636e\u5e93\u7684\u6307\u5b9a\u5bf9\u8c61\n\t\tdb_name.routine \u5bf9\u8c61\u6743\u9650\uff0c\u6307\u5b9a\u6570\u636e\u5e93\u7684\u5b58\u50a8\u7a0b\u5e8f\u5bf9\u8c61\uff0c\u8fc7\u7a0b\u6216\u51fd\u6570\nuser_or_role:\u6307\u5b9a\u88ab\u6388\u6743\u8005\uff0c\u53ef\u4ee5\u662f\u7528\u6237\u540d\u4e5f\u53ef\u4ee5\u662f\u89d2\u8272\u540d\n*\/\n\n--\u56de\u6536\u6743\u9650\nrevoke priv_type on &#91;object_type] priv_level from user_or_role;\n\n--\u67e5\u770b\u5f53\u524d\u767b\u5f55\u7528\u6237\u6743\u9650\nshow grants;\n--\u67e5\u770b\u6307\u5b9a\u7528\u6237\u6743\u9650\nshow grants for user_name;\n--\u67e5\u770b\u7528\u6237\u6743\u9650\u4ee5\u53ca\u7528\u6237\u88ab\u6388\u4e88\u7684\u89d2\u8272\u7684\u6743\u9650\nshow grants for user_name using role;\n\n--\u5220\u9664\u89d2\u8272\ndrop ROLE role;\n\n--\u5237\u65b0\u6743\u9650\uff1a \u5237\u65b0\u6743\u9650\u8868\uff0c\u4f7f\u4fee\u6539\u7684\u6743\u9650\u7acb\u5373\u751f\u6548\u3002\nFLUSH PRIVILEGES;\n--\u5237\u65b0\u8868\u7f13\u5b58\uff1a \u5237\u65b0\u8868\u7f13\u5b58\uff0c\u901a\u5e38\u7528\u4e8e\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u5f3a\u5236\u91cd\u65b0\u52a0\u8f7d\u8868\u7ed3\u6784\u3002\nFLUSH TABLES;\n--\u5237\u65b0\u65e5\u5fd7\uff1a \u5237\u65b0\u65e5\u5fd7\u6587\u4ef6\uff08\u4f8b\u5982\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff09\uff0c\u53ef\u4ee5\u5c06\u5f53\u524d\u65e5\u5fd7\u6587\u4ef6\u5173\u95ed\u5e76\u5f00\u59cb\u4e00\u4e2a\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\nFLUSH LOGS;\n--\u5237\u65b0\u4e34\u65f6\u8868\uff1a \u5237\u65b0\u4e34\u65f6\u8868\u3002\nFLUSH TABLES WITH READ LOCK;\n--\u5237\u65b0\u6240\u6709\u7f13\u5b58\uff1a \u5237\u65b0\u6240\u6709\u7f13\u5b58\uff0c\u5f3a\u5236\u6e05\u9664\u4e00\u4e9b\u7f13\u5b58\u3002\nFLUSH STATUS;\n--\u5237\u65b0\u67e5\u8be2\u7f13\u5b58\uff1a \u5237\u65b0\u67e5\u8be2\u7f13\u5b58\u3002\nFLUSH QUERY CACHE;<\/code><\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u6570\u636e\u5e93\u548c\u8868\u64cd\u4f5c<\/h2>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u521b\u5efa\u6570\u636e\u5e93\ncreate database db_name;\n\n--\u5220\u9664\u6570\u636e\u5e93\ndrop database db_name;\n\n--\u521b\u5efa\u8868\ncreate table tbl_name(id int,name char(10));\n--\u4fee\u6539\u8868\nalter table tbl_name add gender char(10) after name;--\u518dname\u540e\u6dfb\u52a0gender\nalter table tbl_name drop gender;--\u5220\u9664gender\u5217\nalter table tbl_name modify name char(10) not null;--\u8bbe\u7f6ename\u975e\u7a7a\nalter table tbl_name rename column old_col_name to new_col_name--\u4fee\u6539\u5217\u7684\u540d\u5b57\n--\u5220\u9664\u8868\ndrop table tbl_name;<\/code><\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u8868\u6570\u636e\u64cd\u4f5c<\/h2>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u63d2\u5165\u6570\u636e\ninsert into tbl_name values(value_list)&#91;,(value_list)];\n--\u4fee\u6539\u6570\u636e\nupdate tbl_name set sol_name = .... &#91;where \u6761\u4ef6] &#91;order by...\u6392\u5e8f] &#91;limit \u6307\u5b9a\u4fee\u6539\u7684\u884c\u6570];--asc\u5347\u5e8f\uff0cdesc\u964d\u5e8f\n--\u5220\u9664\u6570\u636e\ndelete from tbl_name &#91;where \u6761\u4ef6] &#91;order by...\u6392\u5e8f] &#91;limit \u6307\u5b9a\u4fee\u6539\u7684\u884c\u6570];<\/code><\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u8868\u7ea6\u675f<\/h2>\n\n\n\n<p>\u4e3b\u952e\u7ea6\u675f<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u4e3b\u952e\u7ea6\u675f primary key\n--\u6dfb\u52a0\u4e3b\u952e\u7ea6\u675f\n--\u521b\u5efa\u8868\u65f6\u6dfb\u52a0\ncreate table tbl_name(\n\tid int primary key,\n    name char(10)\n)\n--\u6216\ncreate table tbl_name(\n\tid int,\n    name char(10),\n    primary key(id)\n)\n--\u4fee\u6539\u8868\u6dfb\u52a0\u4e3b\u952e\nalter table tbl_name add primary key(id);\n\n--\u5220\u9664\u4e3b\u952e\u7ea6\u675f\nalter table tbl_name drop primary key;<\/code><\/pre>\n\n\n\n<p>\u5916\u952e\u7ea6\u675f<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u5916\u952e\u7ea6\u675f references\u3001foreign\n--\u6dfb\u52a0\u5916\u952e\u7ea6\u675f\n--\u521b\u5efa\u8868\u65f6\u6dfb\u52a0\ncreate table tbl_name(\n\tid int references ref_tbl_name(ref_col_name),\n    name char(10)\n)\n--\u6216\ncreate table tbl_name(\n\tid int,\n    name char(10),\n    foreign key(id) references ref_tbl_name(ref_col_name)\n)\n--\u4fee\u6539\u8868\u6dfb\u52a0\nalter table tbl_name add foreign key(id) references ref_tbl_name(ref_col_name) &#91;on delete,on update];\n\/*\n&#91;ON DELETE \u5220\u9664\u64cd\u4f5c]\uff1a\u5b9a\u4e49\u5f53\u4e3b\u8868\u7684\u8bb0\u5f55\u88ab\u5220\u9664\u65f6\uff0c\u5916\u952e\u8868\u7684\u884c\u4e3a\u3002\u5e38\u7528\u7684\u9009\u9879\u6709\uff1a\n        CASCADE\uff1a\u5f53\u4e3b\u8868\u8bb0\u5f55\u88ab\u5220\u9664\u65f6\uff0c\u5916\u952e\u8868\u4e2d\u76f8\u5173\u8bb0\u5f55\u4e5f\u4f1a\u88ab\u5220\u9664\u3002\n        SET NULL\uff1a\u5f53\u4e3b\u8868\u8bb0\u5f55\u88ab\u5220\u9664\u65f6\uff0c\u5916\u952e\u8868\u4e2d\u7684\u76f8\u5173\u5217\u503c\u5c06\u88ab\u8bbe\u4e3a NULL\u3002\n        NO ACTION \u6216 RESTRICT\uff1a\u5982\u679c\u4e3b\u8868\u8bb0\u5f55\u88ab\u5220\u9664\uff0c\u4e14\u5916\u952e\u8868\u4e2d\u5b58\u5728\u76f8\u5173\u8bb0\u5f55\uff0c\u5219\u4e0d\u5141\u8bb8\u5220\u9664\u3002\n&#91;ON UPDATE \u66f4\u65b0\u64cd\u4f5c]\uff1a\u5b9a\u4e49\u5f53\u4e3b\u8868\u7684\u8bb0\u5f55\u88ab\u66f4\u65b0\u65f6\uff0c\u5916\u952e\u8868\u7684\u884c\u4e3a\u3002\u5e38\u7528\u7684\u9009\u9879\u6709\uff1a\n        CASCADE\uff1a\u5f53\u4e3b\u8868\u8bb0\u5f55\u7684\u503c\u88ab\u66f4\u65b0\u65f6\uff0c\u5916\u952e\u8868\u4e2d\u76f8\u5173\u8bb0\u5f55\u7684\u5916\u952e\u503c\u4e5f\u4f1a\u81ea\u52a8\u66f4\u65b0\u3002\n        SET NULL\uff1a\u5f53\u4e3b\u8868\u8bb0\u5f55\u88ab\u66f4\u65b0\u65f6\uff0c\u5916\u952e\u8868\u4e2d\u76f8\u5173\u5217\u7684\u503c\u4f1a\u88ab\u8bbe\u4e3a NULL\u3002\n        NO ACTION \u6216 RESTRICT\uff1a\u4e0d\u5141\u8bb8\u66f4\u65b0\u4e3b\u8868\u8bb0\u5f55\uff0c\u5982\u679c\u5916\u952e\u8868\u4e2d\u5b58\u5728\u76f8\u5173\u8bb0\u5f55\u3002\n*\/<\/code><\/pre>\n\n\n\n<p>\u552f\u4e00\u7ea6\u675f<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u552f\u4e00\u7ea6\u675f unique\n--\u6dfb\u52a0\u552f\u4e00\u7ea6\u675f\n--\u521b\u5efa\u8868\u65f6\u6dfb\u52a0\ncreate table tbl_name(\n\tid int unique,\n    name char(10)\n)\n--\u6216\ncreate table tbl_name(\n\tid int,\n    name char(10),\n    unique(id)\n)\n--\u4fee\u6539\u8868\u65f6\u6dfb\u52a0\nalter table tbl_name add uniques(id);<\/code><\/pre>\n\n\n\n<p>\u975e\u7a7a\u7ea6\u675f<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u975e\u7a7a\u7ea6\u675f not null\n--\u6dfb\u52a0\u975e\u7a7a\u7ea6\u675f\n--\u521b\u5efa\u8868\u65f6\u6dfb\u52a0\ncreate table tbl_name(\n\tid int not null,\n    name char(10)\n)\n--\u4fee\u6539\u8868\u65f6\u6dfb\u52a0\nalter table tbl_name modify id int not null;<\/code><\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u5355\u8868\u67e5\u8be2<\/h2>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u67e5\u8be2\u6240\u6709\u4fe1\u606f\nselect * from tbl_name;\n--\u67e5\u8be2\u6307\u5b9a\u5217\u4fe1\u606f\nselect col_name from tbl_name;\n\n--\u5206\u9875\u67e5\u8be2\nselect * from tbl_name order by col_name {desc|asc} limit 0,3;--\u4ece\u7b2c\u4e00\u6761\u6570\u636e\u5f00\u59cb\u663e\u793a3\u6761\u6570\u636e\n\n--\u6307\u5b9a\u8fc7\u6ee4\u6761\u4ef6\nselect * from tbl_name where \u6761\u4ef6\n\/*\n\u5206\u7ec4\u51fd\u6570\navg(x)\u8fd4\u56dex\u5217\u7684\u5e73\u5747\u503c\nmin(x)\u8fd4\u56dex\u5217\u7684\u6700\u5c0f\u503c\nmax(x)\u8fd4\u56dex\u5217\u7684\u6700\u5927\u503c\ncount(x)\u8fd4\u56dex\u5217\u7684\u884c\u6570\nsum(x)\u8fd4\u56dex\u5217\u7684\u548c\n*\/\n--\u5206\u7ec4\u67e5\u8be2 group by\nselect * from tbl_name group by col_name;\n\n--\u6392\u5e8f\nselect * from tbl_name order by &#91;asc,desc]--asc\u5347\u5e8f,desc\u964d\u5e8f\uff0c\u9ed8\u8ba4\u662fasc<\/code><\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u8fde\u63a5\u67e5\u8be2\u548c\u5b50\u67e5\u8be2<\/h2>\n\n\n\n<p>\u8fde\u63a5\u67e5\u8be2<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u5185\u8fde\u63a5\uff08INNER JOIN\uff09\u662f SQL \u4e2d\u6700\u5e38\u7528\u7684\u8fde\u63a5\u7c7b\u578b\uff0c\u5b83\u7528\u4e8e\u8fd4\u56de\u4e24\u4e2a\u8868\u4e2d\u5339\u914d\u7684\u884c\u3002\u901a\u8fc7\u5185\u8fde\u63a5\uff0c\u53ea\u6709\u5f53\u4e24\u5f20\u8868\u4e2d\u67d0\u4e9b\u5b57\u6bb5\u7684\u503c\u5339\u914d\u65f6\uff0c\u624d\u4f1a\u8fd4\u56de\u8fd9\u4e9b\u884c\u7684\u6570\u636e\u3002\n--\u8fde\u63a5\u8bed\u6cd5\u4e00\nselect column_list from tbl_name1,tbl_name2 where condition;\n--\u8fde\u63a5\u8bed\u6cd5\u4e8c\nselect column_list from tbl_name1 join tbl_name2 on condition\n--join \u5b50\u53e5\uff0c\u6307\u5b9a\u8981\u8fde\u63a5\u7684\u8868\uff0c\u5e76\u5728on\u540e\u6307\u5b9a\u8fde\u63a5\u6761\u4ef6\uff0c\u5982\u679c\u8981\u8fde\u63a5\u591a\u4e2a\u8868\u5c31\u4f7f\u7528\u591a\u6b21join...on... \uff0cusing(col_name)\u7b49\u540c\u4e8etbl_name1.col_name=tbl_name2.col_name\n\n--\u5916\u8fde\u63a5\uff08OUTER JOIN\uff09\u662f SQL \u4e2d\u53e6\u4e00\u79cd\u5e38\u7528\u7684\u8fde\u63a5\u7c7b\u578b\uff0c\u5b83\u7528\u4e8e\u8fd4\u56de\u4e24\u4e2a\u8868\u4e2d\u6240\u6709\u7684\u5339\u914d\u8bb0\u5f55\u548c\u672a\u5339\u914d\u7684\u8bb0\u5f55\u3002\nselect column_list from tbl_name1 join tbl_name2 {lift|right} on condition\n--\u5de6\u5916\u8fde\u63a5\u8fd4\u56de\u5de6\u8fb9\u8868\uff08\u7b2c\u4e00\u4e2a\u8868\uff09\u4e2d\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u4ee5\u53ca\u53f3\u8fb9\u8868\uff08\u7b2c\u4e8c\u4e2a\u8868\uff09\u4e2d\u4e0e\u4e4b\u5339\u914d\u7684\u8bb0\u5f55\u3002\u5982\u679c\u53f3\u8fb9\u8868\u6ca1\u6709\u5339\u914d\u7684\u8bb0\u5f55\uff0c\u5219\u4f1a\u8fd4\u56de\u5de6\u8fb9\u8868\u7684\u8bb0\u5f55\uff0c\u5e76\u4e14\u53f3\u8fb9\u8868\u7684\u76f8\u5173\u5217\u4f1a\u663e\u793a NULL\u3002\n--\u53f3\u5916\u8fde\u63a5\u4e0e\u5de6\u5916\u8fde\u63a5\u76f8\u53cd\uff0c\u8fd4\u56de\u53f3\u8fb9\u8868\uff08\u7b2c\u4e8c\u4e2a\u8868\uff09\u4e2d\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u4ee5\u53ca\u5de6\u8fb9\u8868\uff08\u7b2c\u4e00\u4e2a\u8868\uff09\u4e2d\u4e0e\u4e4b\u5339\u914d\u7684\u8bb0\u5f55\u3002\u5982\u679c\u5de6\u8fb9\u8868\u6ca1\u6709\u5339\u914d\u7684\u8bb0\u5f55\uff0c\u5219\u4f1a\u8fd4\u56de\u53f3\u8fb9\u8868\u7684\u8bb0\u5f55\uff0c\u5e76\u4e14\u5de6\u8fb9\u8868\u7684\u76f8\u5173\u5217\u4f1a\u663e\u793a NULL\u3002<\/code><\/pre>\n\n\n\n<p>\u5b50\u67e5\u8be2<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u5355\u884c\u5b50\u67e5\u8be2\n--\u67e5\u8be2\u8868\u4e2d\u5e74\u9f84\u6700\u5c0f\u7684\u5458\u5de5\u4fe1\u606f\nselect * from tbl_name where age=(select min(age) from tbl_name);\n\n--\u591a\u884c\u5b50\u67e5\u8be2\n--\u67e5\u8be2\u5e74\u9f84\u5927\u4e8e\u6240\u6709\u90e8\u95e8\u5e73\u5747\u5e74\u9f84\u7684\u5458\u5de5\u4fe1\u606f\nselect * from emp where age&gt;all(select avg(age) from emp group by dname)\n--\u591a\u884c\u5b50\u67e5\u8be2\uff08Multiple-row Subquery\uff09\u662f\u6307\u5728 SQL \u67e5\u8be2\u4e2d\u4f7f\u7528\u5b50\u67e5\u8be2\u8fd4\u56de\u591a\u884c\u6570\u636e\uff0c\u7136\u540e\u5c06\u8fd9\u4e9b\u591a\u884c\u6570\u636e\u7528\u4e8e\u5916\u90e8\u67e5\u8be2\u7684\u6761\u4ef6\u4e2d\u3002\n\/*\n\u591a\u884c\u5b50\u67e5\u8be2\u901a\u5e38\u7528\u4e8e\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a\n    IN\uff1a\u68c0\u67e5\u67d0\u5217\u7684\u503c\u662f\u5426\u5728\u591a\u884c\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u4e2d\u3002\n    ANY \/ SOME\uff1a\u4e0e\u5b50\u67e5\u8be2\u7ed3\u679c\u4e2d\u7684\u4efb\u4f55\u4e00\u884c\u8fdb\u884c\u6bd4\u8f83\u3002\n    ALL\uff1a\u4e0e\u5b50\u67e5\u8be2\u7ed3\u679c\u4e2d\u7684\u6240\u6709\u884c\u8fdb\u884c\u6bd4\u8f83\n*\/\n\n--\u5173\u8054\u5b50\u67e5\u8be2\n--\u67e5\u8be2\u6bcf\u4e2a\u90e8\u95e8\u5e74\u9f84\u6700\u5c0f\u7684\u5458\u5de5\nselect * from emp o where age=(select min(age) from emp i where i.dno=o.dno);\n--\u5173\u8054\u5b50\u67e5\u8be2\uff08Correlated Subquery\uff09 \u662f\u6307\u5728 SQL \u67e5\u8be2\u4e2d\uff0c\u5b50\u67e5\u8be2\u7684\u6267\u884c\u4f9d\u8d56\u4e8e\u5916\u90e8\u67e5\u8be2\u7684\u6bcf\u4e00\u884c\u6570\u636e\u3002<\/code><\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u7d22\u5f15\u548c\u89c6\u56fe<\/h2>\n\n\n\n<p>\u7d22\u5f15<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u521b\u5efa\u7d22\u5f15\n--\u521b\u5efa\u8868\u5e76\u521b\u5efa\u7d22\u5f15\ncreate table tbl_name(id int,{index|key} index_name(col_name));\n--\u4fee\u6539\u8868\u521b\u5efa\u7d22\u5f15\nalter table tbl_name add {index|key} index_name(col_name);\n--\u4f7f\u7528create index\u521b\u5efa\u7d22\u5f15\ncreate &#91;unique] index index_name on tbl_name(col_name);\n\n--\u67e5\u8be2\u7d22\u5f15\nshow index from tbl_name;\n\n--\u5220\u9664\u7d22\u5f15\n--\u4f7f\u7528alter\nalter table tbl_name drop {index|key} index_name;\n--\u4f7f\u7528drop\ndrop index index_name on tbl_name;<\/code><\/pre>\n\n\n\n<p>\u89c6\u56fe<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>--\u521b\u5efa\u7d22\u5f15\ncreate view view_name as select_startment;\n--\u4f8b\ncreate view v1 as select * from tbl_name where salary&gt;5000;\n\n--\u5220\u9664\u89c6\u56fe\ndrop view view_name;<\/code><\/pre>\n\n\n\n<h2 class=\"wp-block-heading\">\u5185\u7f6e\u51fd\u6570<\/h2>\n\n\n\n<pre class=\"wp-block-code\"><code>\/*\n----\u6570\u5b57\u51fd\u6570\nabs(x)\t\t\tx\u7684\u7edd\u5bf9\u503c\nceil(x)\t\t\t\u8fd4\u56de\u6bd4x\u5927\u7684\u6700\u5c0f\u6574\u6570\nfloor(x)\t\t\u8fd4\u56de\u6bd4x\u5c0f\u7684\u6700\u5927\u6574\u6570\nmod(n,m)\t\t\u8fd4\u56den\u9664\u4ee5m\u7684\u4f59\u6570\npow(x,y)\t\t\u8fd4\u56dex\u7684y\u6b21\u5e42\nrand(&#91;n])\t\t\u8fd4\u56de\u4e00\u4e2a\u968f\u673a\u6570\uff0c\u5982\u679c\u6307\u5b9an\u5219\u8fd4\u56de\u7684\u968f\u673a\u6570\u56fa\u5b9a\nround(x&#91;,d])\t\u8fd4\u56de\u4e00\u4e2a\u56db\u820d\u4e94\u5165\u7684\u6570\uff0cd\u6307\u4fdd\u7559\u5c0f\u6570\u7684\u4f4d\u6570\uff0c\u5982\u679c\u672a\u6307\u5b9a\u5219\u9ed8\u8ba40\ntruncate(x,d) \t\u8fd4\u56de\u4e00\u4e2a\u622a\u65ad\u540e\u7684\u6570\uff0cd\u6307\u4fdd\u7559\u5c0f\u6570\u4f4d\u6570\n----\u5b57\u7b26\u51fd\u6570\nascii(str)\t\t\u8fd4\u56destr\u5de6\u4fa7\u7b2c\u4e00\u4e2a\u5b57\u7b26\u7684\u6570\u5b57\u7f16\u7801\uff0c\u5982\u679cstr\u4e3a\u7a7a\uff0c\u8fd4\u56de0\nchar(n,...&#91;using charset_name]) \u5c06ascii\u6570\u5b57\u8fd8\u539f\u6210\u5b57\u7b26\nchar_length(str) \u8fd4\u56de\u5b57\u7b26\u4e32str\u7684\u5b57\u7b26\u4e2a\u6570\nconcat(str1,str2,...) \u5c06str1,str2...\u62fc\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\ninstr(str,substr) \u8fd4\u56desubstr\u5728str\u4e2d\u7684\u4f4d\u7f6e\uff0c\u6ca1\u6709\u5219\u8fd4\u56de0\nlocate(substr,str,&#91;position]) \u8fd4\u56desubstr\u5728str\u4e2d\u7684\u4f4d\u7f6e\uff0c\u6ca1\u6709\u5219\u8fd4\u56de0\uff0c\u4eceposition\u4f4d\u7f6e\u5f00\u59cb\uff0c\u6ca1\u6307\u5b9a\u5c31\u4ece\u7b2c\u4e00\u4e2a\u5b57\u7b26\u5f00\u59cb\nleft(str,len)\t\u4ecestr\u5de6\u4fa7\u53d6\u957f\u5ea6\u4e3alen\u7684\u5b57\u7b26\u4e32\nlength(str)\t\t\u8fd4\u56destr\u7684\u5b57\u8282\u957f\u5ea6\nlower(str)\t\t\u5c06str\u5168\u90e8\u8f6c\u6210\u5c0f\u5199\nupper(str)\t\t\u5c06str\u5168\u90e8\u8f6c\u6210\u5927\u5199\nlpad(str,len,padstr) \u4ece\u5de6\u4fa7\u5bf9\u5b57\u7b26\u4e32str\u8fdb\u884c\u586b\u5145\uff0c\u957f\u5ea6\u4e0d\u8db3len\u7684\u90e8\u5206\u7528padstr\u586b\u5145\nrpad(str,len,padstr) \u4ece\u53f3\u4fa7\u5bf9\u5b57\u7b26\u4e32str\u8fdb\u884c\u586b\u5145\uff0c\u957f\u5ea6\u4e0d\u8db3len\u7684\u90e8\u5206\u7528padstr\u586b\u5145\nltrim(str)\t\t\u5c06\u5b57\u7b26\u4e32\u5de6\u4fa7\u7a7a\u683c\u5220\u9664\nrtrim(str)\t\t\u5c06\u5b57\u7b26\u4e32\u53f3\u4fa7\u7a7a\u683c\u5220\u9664\nrepeat(str,count)\u5c06str\u91cd\u590dcount\u6b21\nreplace(str,from_str,to_str) \u5c06\u5b57\u7b26\u4e32\u4e2d\u6240\u6709from_str\u66ff\u6362\u6210to_str\nreplace(str)\t\u5c06\u5b57\u7b26\u4e32str\u7684\u5b57\u7b26\u8fdb\u884c\u53cd\u8f6c\nright(str,len)\t\u4ecestr\u7684\u53f3\u4fa7\u53d6\u957f\u5ea6\u4e3alen\u7684\u5b57\u7b26\nspace(n)\t\t\u6784\u9020\u5305\u542bn\u4e2a\u7a7a\u683c\u7684\u5b57\u7b26\u4e32\nsubstr(str,pos&#91;,len]) \u4ecestr\u7684pos\u6307\u5b9a\u7684\u4f4d\u7f6e\u5f00\u59cb\u53d6\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u957f\u5ea6len\uff0c\u5219\u4ecepos\u53d6\u5230\u672b\u5c3e\ntrim(&#91;remstr from] str) \u4ecestr\u7684\u4e24\u4fa7\u5220\u6389\u6307\u5b9a\u5b57\u7b26remstr\uff0c\u5982\u679c\u6ca1\u6307\u5b9a\u5c31\u5220\u9664\u7a7a\u683c\n----\u65f6\u95f4\u51fd\u6570\n1. \u83b7\u53d6\u5f53\u524d\u65e5\u671f\u548c\u65f6\u95f4\nCURRENT_DATE \/ CURDATE(): \u8fd4\u56de\u5f53\u524d\u7684\u65e5\u671f\uff08\u4e0d\u5305\u62ec\u65f6\u95f4\uff09\u3002\nCURRENT_TIME \/ CURTIME(): \u8fd4\u56de\u5f53\u524d\u7684\u65f6\u95f4\uff08\u4e0d\u5305\u62ec\u65e5\u671f\uff09\u3002\nCURRENT_TIMESTAMP \/ NOW(): \u8fd4\u56de\u5f53\u524d\u7684\u65e5\u671f\u548c\u65f6\u95f4\u3002\nLOCALTIME \/ LOCALTIMESTAMP: \u8fd4\u56de\u5f53\u524d\u7684\u65e5\u671f\u548c\u65f6\u95f4\uff08\u4e0e CURRENT_TIMESTAMP \u7b49\u6548\uff0c\u4f46\u7528\u6cd5\u66f4\u660e\u786e\uff09\n2. \u65e5\u671f\u548c\u65f6\u95f4\u7684\u63d0\u53d6\n\u8fd9\u4e9b\u51fd\u6570\u53ef\u4ee5\u4ece\u65e5\u671f\u6216\u65f6\u95f4\u4e2d\u63d0\u53d6\u5177\u4f53\u7684\u90e8\u5206\uff08\u5e74\u3001\u6708\u3001\u65e5\u3001\u5c0f\u65f6\u3001\u5206\u949f\u3001\u79d2\u7b49\uff09\u3002\nYEAR(date): \u63d0\u53d6\u5e74\u4efd\u3002\nMONTH(date): \u63d0\u53d6\u6708\u4efd\u3002\nDAY(date) \/ DAYOFMONTH(date): \u63d0\u53d6\u65e5\u671f\u4e2d\u7684\u201c\u65e5\u201d\u90e8\u5206\u3002\nHOUR(time): \u63d0\u53d6\u5c0f\u65f6\u3002\nMINUTE(time): \u63d0\u53d6\u5206\u949f\u3002\nSECOND(time): \u63d0\u53d6\u79d2\u3002\nDAYOFWEEK(date): \u8fd4\u56de\u661f\u671f\u51e0\uff0c1 \u4e3a\u661f\u671f\u65e5\uff0c7 \u4e3a\u661f\u671f\u516d\u3002\nWEEK(date): \u8fd4\u56de\u65e5\u671f\u6240\u5728\u7684\u5468\u6570\n3. \u65e5\u671f\u548c\u65f6\u95f4\u7684\u8ba1\u7b97\nDATE_ADD(date, INTERVAL expr unit): \u7ed9\u5b9a\u65e5\u671f\u52a0\u4e0a\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u3002\nDATE_SUB(date, INTERVAL expr unit): \u4ece\u7ed9\u5b9a\u65e5\u671f\u4e2d\u51cf\u53bb\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u3002\nDATEDIFF(date1, date2): \u8ba1\u7b97\u4e24\u4e2a\u65e5\u671f\u4e4b\u95f4\u7684\u5929\u6570\u5dee\u5f02\u3002\nTIMESTAMPDIFF(unit, datetime1, datetime2): \u8ba1\u7b97\u4e24\u4e2a\u65e5\u671f\u65f6\u95f4\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u6309\u6307\u5b9a\u7684\u5355\u4f4d\u8fd4\u56de\uff08\u5982\u5e74\u3001\u6708\u3001\u65e5\u3001\u5c0f\u65f6\u7b49\uff09\u3002\n4. \u65e5\u671f\u683c\u5f0f\u5316\nDATE_FORMAT(date, format): \u6309\u7167\u6307\u5b9a\u7684\u683c\u5f0f\u8fd4\u56de\u65e5\u671f\u6216\u65f6\u95f4\u3002\n\u5e38\u7528\u7684\u683c\u5f0f\u5316\u7b26\u53f7\uff1a\n%Y: \u56db\u4f4d\u6570\u5e74\u4efd\uff08\u5982 2024\uff09\n%m: \u6708\u4efd\uff0801-12\uff09\n%d: \u65e5\uff0801-31\uff09\n%H: \u5c0f\u65f6\uff0800-23\uff09\n%i: \u5206\u949f\uff0800-59\uff09\n%s: \u79d2\uff0800-59\uff09\n5. \u65e5\u671f\u548c\u65f6\u95f4\u7684\u8f6c\u6362\nSTR_TO_DATE(str, format): \u5c06\u5b57\u7b26\u4e32\u6309\u7167\u6307\u5b9a\u683c\u5f0f\u8f6c\u6362\u4e3a\u65e5\u671f\u3002\nDATE(): \u63d0\u53d6\u65e5\u671f\u90e8\u5206\uff08\u53bb\u6389\u65f6\u95f4\u90e8\u5206\uff09\u3002\nTIME(): \u63d0\u53d6\u65f6\u95f4\u90e8\u5206\uff08\u53bb\u6389\u65e5\u671f\u90e8\u5206\uff09\u3002\nCAST(): \u5c06\u65e5\u671f\u65f6\u95f4\u8f6c\u6362\u4e3a\u4e0d\u540c\u7684\u7c7b\u578b\uff08\u5982\u8f6c\u6362\u4e3a DATE\u3001TIME \u7b49\uff09\u3002\n6. \u65f6\u533a\u5904\u7406\n\u4e00\u4e9b\u6570\u636e\u5e93\u7cfb\u7edf\uff08\u5982 MySQL\uff09\u5141\u8bb8\u5bf9\u65f6\u533a\u8fdb\u884c\u5904\u7406\uff1a\nCONVERT_TZ(datetime, from_tz, to_tz): \u5c06\u4e00\u4e2a\u65e5\u671f\u65f6\u95f4\u4ece\u4e00\u4e2a\u65f6\u533a\u8f6c\u6362\u5230\u53e6\u4e00\u4e2a\u65f6\u533a\n7. \u5176\u4ed6\u6709\u7528\u7684\u65e5\u671f\u51fd\u6570\nLAST_DAY(date): \u8fd4\u56de\u7ed9\u5b9a\u65e5\u671f\u6240\u5728\u6708\u7684\u6700\u540e\u4e00\u5929\u3002\nNOW(): \u8fd4\u56de\u5f53\u524d\u7684\u65e5\u671f\u548c\u65f6\u95f4\u3002\nEXTRACT(unit FROM date): \u63d0\u53d6\u6307\u5b9a\u65f6\u95f4\u90e8\u5206\uff0c\u5982\u5e74\u3001\u6708\u3001\u65e5\u7b49\uff08\u9002\u7528\u4e8e\u67d0\u4e9b\u6570\u636e\u5e93\u7cfb\u7edf\uff0c\u5982 PostgreSQL\uff09\u3002\n*\/<\/code><\/pre>\n","protected":false},"excerpt":{"rendered":"<p>\u7528\u6237\u6743\u9650\u53ca\u89d2\u8272 \u521b\u5efa\u7528\u6237 with auth_plugin\u662f\u6307\u5b9a\u7528\u6237\u53e3\u4ee4\u52a0\u5bc6\u65b9\u5f0f\uff0c\u4e0d\u5199\u5c31\u662f\u9ed8\u8ba4\u3002role\u662f\u6307\u5b9a [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[6],"tags":[],"_links":{"self":[{"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=\/wp\/v2\/posts\/147"}],"collection":[{"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=%2Fwp%2Fv2%2Fcomments&post=147"}],"version-history":[{"count":9,"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=\/wp\/v2\/posts\/147\/revisions"}],"predecessor-version":[{"id":159,"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=\/wp\/v2\/posts\/147\/revisions\/159"}],"wp:attachment":[{"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=%2Fwp%2Fv2%2Fmedia&parent=147"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=%2Fwp%2Fv2%2Fcategories&post=147"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/www.xiaoyaojingjv.cn\/index.php?rest_route=%2Fwp%2Fv2%2Ftags&post=147"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}